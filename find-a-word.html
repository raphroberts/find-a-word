<!DOCTYPE html>
<html>
<head>
<style>
	
	canvas {
    cursor: crosshair;
    border: 1px solid #000000;
}

</style>

<link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>

</head>
<body>

<canvas id="canvas" width="800" height="500"></canvas>
<div id="output"></div>

</body>

<script>
//Canvas
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');
fps = 30,
setInterval(drawGrid, 1000 / fps);

//Variables
var canvasx = $(canvas).offset().left;
var canvasy = $(canvas).offset().top;
var last_mousex = last_mousey = 0;
var mousex = mousey = 0;
var mousedown = false;

ctx.font = "30px Ubuntu Mono";

// Positioning data

var xPadding = 30;
var yPadding = 30;
var xRenderLetter = xPadding;
var yRenderLetter = yPadding;

// Rendering data

var columnCount = 1;
var maxColumns = 12;

var letterString = "\
NASTRAPHTUOM\
SGNIWLIDAEMW\
WHJVAGBUOJBJ\
EJIDPJIUASVE\
FEANNETNBASA\
EERTDHLNMOHN\
HLVUPLEDUTPN\
BQCAMMEMTHAE\
YPRAOEIGOOFT\
ATHDRDFKNRTN\
IMBKLIBUOAGA\
BAWEJBPQRXFA\
ICGEYESSPYQS\
TPFORELEGEZJ";

function drawGrid() {
	// Draws a grid of letters

	for (var i = 0; i < letterString.length; i++) {
		  ctx.fillText(letterString.charAt(i), xRenderLetter, yRenderLetter);
		  xRenderLetter += xPadding;
		  columnCount += 1;
		  // When columns created = maxColumns, create a new row
		  if(columnCount > 11){
			  columnCount = 1;
			  yRenderLetter += yPadding;
			  xRenderLetter = xPadding;
		  }
	}

}

//drawGrid();

//Mousedown
$(canvas).on('mousedown', function(e) {
    last_mousex = parseInt(e.clientX-canvasx);
	last_mousey = parseInt(e.clientY-canvasy);
    mousedown = true;
});

//Mouseup
$(canvas).on('mouseup', function(e) {
    mousedown = false;
});

//Mousemove
$(canvas).on('mousemove', function(e) {
    mousex = parseInt(e.clientX-canvasx);
	mousey = parseInt(e.clientY-canvasy);
    if(mousedown) {
        ctx.clearRect(0,0,canvas.width,canvas.height); //clear canvas
        drawGrid();
        ctx.beginPath();
        ctx.moveTo(last_mousex,last_mousey);
        ctx.lineTo(mousex,mousey);
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 10;
        ctx.lineJoin = ctx.lineCap = 'round';
        ctx.stroke();
    }
    //Output
    $('#output').html('current: '+mousex+', '+mousey+'<br/>last: '+last_mousex+', '+last_mousey+'<br/>mousedown: '+mousedown);
});


//ctx.fillText(letterString, 10, 50);


</script>

</html>